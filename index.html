<!DOCTYPE html>
<html lang="en" class="scroll-smooth">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>The Complete SQL Mastery Guide: Interactive Edition</title>
    <link rel="icon" href="data:image/svg+xml,<svg xmlns=%22http://www.w3.org/2000/svg%22 viewBox=%220 0 100 100%22><text y=%22.9em%22 font-size=%2290%22>üìò</text></svg>">
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Lexend:wght@600;700&family=Inter:wght@400;500&family=Source+Code+Pro:wght@400;600&display=swap" rel="stylesheet">
    <link href="https://fonts.googleapis.com/css2?family=Material+Symbols+Outlined" rel="stylesheet" />
    <style>
        body { font-family: 'Inter', sans-serif; background-color: #f8fafc; color: #334155; }
        .font-heading { font-family: 'Lexend', sans-serif; }
        .font-mono { font-family: 'Source Code Pro', monospace; }
        
        .nav-link { 
            transition: all 0.2s ease-in-out; 
            cursor: pointer; 
            border-radius: 9999px; /* pill shape */
        }
        .nav-link.active { 
            background-color: #ea580c; /* orange-600 */
            color: white;
            box-shadow: 0 4px 14px 0 rgb(234 88 12 / 39%);
        }
        .nav-link:not(.active):hover { background-color: #fed7aa; /* orange-200 */ color: #c2410c; }

        .concept-card { transition: box-shadow 0.2s; }
        .concept-card:hover { box-shadow: 0 10px 20px -5px rgba(0,0,0,0.1); }

        .command-btn.active, .category-btn.active { background-color: #1e3a8a; color: white; box-shadow: 0 2px 4px rgba(0,0,0,0.1); }

        .output-table { width: 100%; border-collapse: collapse; }
        .output-table th, .output-table td { border: 1px solid #e2e8f0; padding: 6px 8px; text-align: left; font-size: 0.875rem; }
        .output-table th { background-color: #f1f5f9; }
        
        details > summary { cursor: pointer; font-weight: 500; list-style: none; }
        details > summary::-webkit-details-marker { display: none; }
        details > summary::before { content: '‚ñ∏'; margin-right: 0.5rem; display: inline-block; transition: transform 0.2s; }
        details[open] > summary::before { transform: rotate(90deg); }
        
        @keyframes fadeIn { from { opacity: 0; transform: translateY(8px); } to { opacity: 1; transform: translateY(0); } }
        .fade-in { animation: fadeIn 0.4s ease-out forwards; }
        
        .spinner { border: 2px solid #e2e8f0; border-top: 2px solid #ea580c; border-radius: 50%; width: 20px; height: 20px; animation: spin 1s linear infinite; }
        @keyframes spin { 0% { transform: rotate(0deg); } 100% { transform: rotate(360deg); } }
        
        /* Join Animation Styles */
        .join-animation-container { display: grid; grid-template-columns: 1fr auto 1fr; gap: 1rem; align-items: center; min-height: 320px; }
        .join-table-viz { background-color: white; border: 1px solid #e2e8f0; border-radius: 0.5rem; padding: 0.5rem; font-size: 0.75rem; min-height: 180px; }
        .join-table-viz .header { font-weight: bold; border-bottom: 1px solid #e2e8f0; margin-bottom: 0.25rem; padding-bottom: 0.25rem; }
        .join-row { display: flex; justify-content: space-between; padding: 0.25rem; border-radius: 0.25rem; margin-bottom: 0.25rem; transition: all 0.5s ease-in-out; background-color: #f8fafc; border: 1px solid transparent; }
        .join-row.highlight-match { background-color: #dbeafe; border-color: #93c5fd; }
        .join-row.highlight-no-match { background-color: #fee2e2; border-color: #fca5a5; }
        .join-process-area { display: flex; flex-direction: column; align-items: center; justify-content: center; font-weight: bold; color: #1e3a8a; }
        @keyframes slide-in { from { transform: translateX(-20px); opacity: 0; } to { transform: translateX(0); opacity: 1; } }
        .result-row-enter { animation: slide-in 0.5s forwards; }
        
        .material-symbols-outlined { font-variation-settings: 'FILL' 0, 'wght' 400, 'GRAD' 0, 'opsz' 24; font-size: 1.25rem; vertical-align: bottom; margin-right: 0.25rem;}
    </style>
</head>
<body class="bg-slate-100 text-slate-600">

    <header class="bg-white/80 text-slate-800 sticky top-0 z-50 shadow-md backdrop-blur-sm">
        <div class="container mx-auto px-4 sm:px-6">
            <div class="flex justify-between items-center py-4">
                 <h1 class="text-xl md:text-2xl font-bold font-heading flex items-center">
                    <span class="material-symbols-outlined mr-2 text-orange-500">database</span>
                    SQL Mastery Guide
                </h1>
                <div class="md:hidden">
                    <button id="menu-toggle" class="p-2 rounded-md hover:bg-slate-200 focus:outline-none focus:ring-2 focus:ring-inset focus:ring-orange-500">
                        <span class="material-symbols-outlined">menu</span>
                    </button>
                </div>
            </div>
            <nav id="main-nav" class="hidden md:block border-t md:border-t-0 md:border-b border-slate-200">
                <div class="flex flex-col md:flex-row flex-wrap gap-2 py-3">
                    <a data-tab="foundations" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">foundation</span>Foundations</a>
                    <a data-tab="setup" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">build_circle</span>Setup</a>
                    <a data-tab="commands" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">terminal</span>Commands</a>
                    <a data-tab="keywords" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">key</span>Keywords</a>
                    <a data-tab="ai-assistant" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">smart_toy</span>AI Assistant</a>
                    <a data-tab="joins" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">merge_type</span>JOINs</a>
                    <a data-tab="advanced" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">rocket_launch</span>Advanced</a>
                    <a data-tab="prep" class="nav-link py-2 px-4 whitespace-nowrap flex items-center text-sm bg-slate-200 text-slate-700"><span class="material-symbols-outlined !text-base mr-1">school</span>Interview Prep</a>
                </div>
            </nav>
        </div>
    </header>

    <main class="container mx-auto px-4 sm:px-6 py-8">

        <section id="foundations" class="tab-panel">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 1: Database Foundations</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">A proficient SQL practitioner understands the "why" before the "how". This section breaks down the foundational concepts of relational databases.</p>
            </div>
            <div class="space-y-8">
                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <p class="text-sm mb-4"><strong>SQL (Structured Query Language)</strong> is the standard language for managing and manipulating relational databases. To build a solid foundation, you should master the following core concepts, starting from the basic building blocks and moving toward more complex operations.</p>
                </div>

                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">The Four Sub-Languages of SQL</h3>
                    <p class="text-sm mb-4">SQL commands are often categorized into four main groups. Understanding this division helps clarify the purpose of each command.</p>
                    <div class="grid md:grid-cols-2 gap-6 text-sm">
                        <div class="bg-blue-50 p-4 rounded-lg border border-blue-200">
                            <h4 class="font-bold text-blue-800">DDL (Data Definition Language)</h4>
                            <p class="text-xs mt-1 text-blue-700">Defines and manages the database structure (the blueprint).</p>
                            <ul class="list-disc list-inside mt-2 space-y-1">
                                <li><strong>CREATE:</strong> To make a new database, table, or view.</li>
                                <li><strong>ALTER:</strong> To modify the structure of an existing table.</li>
                                <li><strong>DROP:</strong> To permanently delete a database, table, or view.</li>
                                <li><strong>TRUNCATE:</strong> To quickly remove all rows from a table.</li>
                            </ul>
                        </div>
                        <div class="bg-green-50 p-4 rounded-lg border border-green-200">
                            <h4 class="font-bold text-green-800">DML (Data Manipulation Language) ‚úçÔ∏è</h4>
                            <p class="text-xs mt-1 text-green-700">Used to interact with the data within the tables.</p>
                             <ul class="list-disc list-inside mt-2 space-y-1">
                                <li><strong>SELECT:</strong> To retrieve data from one or more tables.</li>
                                <li><strong>INSERT:</strong> To add new rows of data into a table.</li>
                                <li><strong>UPDATE:</strong> To modify existing rows in a table.</li>
                                <li><strong>DELETE:</strong> To remove specific rows from a table.</li>
                            </ul>
                        </div>
                        <div class="bg-yellow-50 p-4 rounded-lg border border-yellow-200">
                            <h4 class="font-bold text-yellow-800">DCL (Data Control Language)</h4>
                            <p class="text-xs mt-1 text-yellow-700">Manages user permissions and access rights.</p>
                             <ul class="list-disc list-inside mt-2 space-y-1">
                                <li><strong>GRANT:</strong> To give specific permissions to a database user.</li>
                                <li><strong>REVOKE:</strong> To take away permissions from a user.</li>
                            </ul>
                        </div>
                        <div class="bg-purple-50 p-4 rounded-lg border border-purple-200">
                            <h4 class="font-bold text-purple-800">TCL (Transaction Control Language)</h4>
                            <p class="text-xs mt-1 text-purple-700">Manages transactions (sequences of operations).</p>
                             <ul class="list-disc list-inside mt-2 space-y-1">
                                <li><strong>COMMIT:</strong> To save all changes made in a transaction.</li>
                                <li><strong>ROLLBACK:</strong> To undo all changes made in a transaction.</li>
                                <li><strong>SAVEPOINT:</strong> To set a point within a transaction to roll back to.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">The SELECT Statement: The Heart of SQL</h3>
                    <p class="text-sm mb-4">The <code>SELECT</code> statement is the most important and widely used command for retrieving data. A complete query follows a specific logical order of operations.</p>
                    <ul class="list-decimal list-inside space-y-2 text-sm mb-4">
                        <li><strong>SELECT:</strong> Specifies the columns you want to retrieve. Use <code>*</code> to select all columns.</li>
                        <li><strong>FROM:</strong> Specifies the table you are querying from.</li>
                        <li><strong>WHERE:</strong> Filters rows based on specific conditions. You'll use comparison operators (<code>=, !=, <, ></code>), logical operators (<code>AND, OR, NOT</code>), and pattern matching (<code>LIKE, IN, BETWEEN</code>).</li>
                        <li><strong>GROUP BY:</strong> Aggregates rows that have the same values into summary rows. It's often used with aggregate functions.</li>
                        <li><strong>HAVING:</strong> Filters groups created by the <code>GROUP BY</code> clause, similar to how <code>WHERE</code> filters rows.</li>
                        <li><strong>ORDER BY:</strong> Sorts the final result set in ascending (<code>ASC</code>) or descending (<code>DESC</code>) order.</li>
                        <li><strong>LIMIT / TOP:</strong> Restricts the number of rows returned. (Syntax varies by SQL dialect).</li>
                    </ul>
                    <h4 class="font-semibold text-slate-600 mb-2">Example Query Structure:</h4>
                    <div class="bg-slate-800 text-white rounded-lg p-4">
                        <pre><code class="font-mono text-sm">SELECT column1, column2
FROM table_name
WHERE condition
GROUP BY column1
HAVING condition_on_group
ORDER BY column2 DESC
LIMIT 10;</code></pre>
                    </div>
                </div>

                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">Constraints & Data Types</h3>
                    <p class="text-sm mb-4">These rules ensure the integrity and reliability of the data in your database.</p>
                    <div class="grid md:grid-cols-2 gap-6">
                        <div>
                            <h4 class="font-semibold text-slate-600 mb-2">Common Data Types</h4>
                             <ul class="list-disc list-inside text-sm space-y-1">
                                <li><strong>Text:</strong> <code>VARCHAR</code>, <code>TEXT</code>, <code>CHAR</code></li>
                                <li><strong>Numeric:</strong> <code>INT</code> (or <code>INTEGER</code>), <code>FLOAT</code>, <code>DECIMAL</code></li>
                                <li><strong>Date/Time:</strong> <code>DATE</code>, <code>TIME</code>, <code>TIMESTAMP</code></li>
                                <li><strong>Boolean:</strong> <code>BOOLEAN</code></li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-600 mb-2">Constraints</h4>
                             <ul class="list-disc list-inside text-sm space-y-1">
                                <li><strong>PRIMARY KEY:</strong> Uniquely identifies each record in a table.</li>
                                <li><strong>FOREIGN KEY:</strong> Links two tables together.</li>
                                <li><strong>UNIQUE:</strong> Ensures that all values in a column are different.</li>
                                <li><strong>NOT NULL:</strong> Ensures that a column cannot have a NULL value.</li>
                                <li><strong>DEFAULT:</strong> Provides a default value for a column.</li>
                                <li><strong>CHECK:</strong> Ensures values in a column satisfy a specific condition.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">JOINs: Combining Data from Multiple Tables ü§ù</h3>
                    <p class="text-sm mb-4"><code>JOIN</code> clauses are used to combine rows from two or more tables based on a related column between them. This is a fundamental concept in relational databases.</p>
                    <ul class="list-disc list-inside space-y-2 text-sm">
                        <li><strong>INNER JOIN:</strong> Returns records that have matching values in both tables.</li>
                        <li><strong>LEFT JOIN (or LEFT OUTER JOIN):</strong> Returns all records from the left table, and the matched records from the right table. The result is NULL from the right side if there is no match.</li>
                        <li><strong>RIGHT JOIN (or RIGHT OUTER JOIN):</strong> Returns all records from the right table, and the matched records from the left table. The result is NULL from the left side if there is no match.</li>
                        <li><strong>FULL OUTER JOIN:</strong> Returns all records when there is a match in either the left or right table. It combines the results of both LEFT and RIGHT joins.</li>
                    </ul>
                </div>
                
                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">Important Functions & Operators</h3>
                    <div class="space-y-4">
                        <div>
                            <h4 class="font-semibold text-slate-600 mb-2">Aggregate Functions</h4>
                            <p class="text-sm mb-2">Perform a calculation on a set of values and return a single value.</p>
                            <ul class="list-disc list-inside text-sm space-y-1">
                                <li><strong>COUNT():</strong> Counts the number of rows.</li>
                                <li><strong>SUM():</strong> Calculates the sum of values.</li>
                                <li><strong>AVG():</strong> Calculates the average of values.</li>
                                <li><strong>MIN() / MAX():</strong> Returns the smallest/largest value.</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-600 mb-2">Set Operators</h4>
                            <p class="text-sm mb-2">Combine the result sets of two or more <code>SELECT</code> statements.</p>
                            <ul class="list-disc list-inside text-sm space-y-1">
                                <li><strong>UNION:</strong> Combines two result sets and removes duplicate rows.</li>
                                <li><strong>UNION ALL:</strong> Combines two result sets but includes all duplicate rows.</li>
                                <li><strong>INTERSECT:</strong> Returns only the rows that appear in both result sets.</li>
                                <li><strong>EXCEPT:</strong> Returns rows from the first query that are not present in the second.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">Advanced Foundational Concepts üèõÔ∏è</h3>
                    <p class="text-sm mb-4">Once you are comfortable with the above, these concepts are the next step to a solid foundation.</p>
                    <ul class="list-disc list-inside space-y-3 text-sm">
                        <li><strong>Subqueries (Nested Queries):</strong> A query placed inside another query. They can be used in <code>SELECT</code>, <code>FROM</code>, <code>WHERE</code>, or <code>HAVING</code> clauses to perform complex filtering and data retrieval.</li>
                        <li><strong>Common Table Expressions (CTEs):</strong> A temporary, named result set that you can reference within a statement. CTEs, defined using the <code>WITH</code> clause, improve readability of complex queries.</li>
                        <li><strong>Views:</strong> A virtual table based on the result-set of an SQL statement. A view can be used to simplify complex queries, provide a layer of security, and present data differently.</li>
                        <li><strong>Indexes:</strong> Special lookup tables that the database can use to speed up data retrieval. Creating an index on a column can significantly improve the performance of queries.</li>
                        <li><strong>Database Normalization:</strong> The process of organizing columns and tables to minimize data redundancy. The most common forms are First Normal Form (1NF), Second Normal Form (2NF), and Third Normal Form (3NF).</li>
                    </ul>
                </div>
                
                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">SQL vs. NoSQL: A Deeper Look</h3>
                    <p class="text-sm mb-4">The core difference is <strong>structure</strong>. Relational databases organize data into rigid, predefined tables like spreadsheets, while non-relational databases use flexible models to store varied data types, like files in a folder. SQL is the universal language used to communicate specifically with relational databases.</p>
                    
                    <div class="text-center my-6">
                        <svg class="w-full max-w-2xl mx-auto" viewBox="0 0 400 150">
                            <!-- SQL Side -->
                            <text x="75" y="15" font-family="Lexend" font-size="10" text-anchor="middle" fill="#1e293b">Relational (SQL)</text>
                            <rect x="25" y="25" width="100" height="100" rx="5" fill="#fff" stroke="#94a3b8"/>
                            <line x1="25" y1="45" x2="125" y2="45" stroke="#cbd5e1"/>
                            <line x1="75" y1="25" x2="75" y2="125" stroke="#cbd5e1"/>
                            <text x="50" y="38" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">ID</text>
                            <text x="100" y="38" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">Name</text>
                            <text x="50" y="60" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">1</text>
                            <text x="100" y="60" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">Alice</text>
                            <text x="50" y="80" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">2</text>
                            <text x="100" y="80" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">Bob</text>
                            <text x="75" y="140" font-family="Inter" font-size="8" text-anchor="middle" fill="#64748b">üìá Rigid Schema</text>
                            
                            <!-- NoSQL Side -->
                            <text x="325" y="15" font-family="Lexend" font-size="10" text-anchor="middle" fill="#1e293b">Non-Relational (NoSQL)</text>
                            <rect x="275" y="25" width="100" height="40" rx="3" fill="#fff" stroke="#94a3b8"/>
                            <text x="325" y="45" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">{ name: "Eve", age: 28 }</text>
                            <rect x="265" y="75" width="120" height="50" rx="3" fill="#fff" stroke="#94a3b8"/>
                            <text x="325" y="95" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">{ name: "Frank",</text>
                            <text x="325" y="105" font-family="Inter" font-size="7" text-anchor="middle" fill="#475569">  hobbies: ["ski", "read"] }</text>
                            <text x="325" y="140" font-family="Inter" font-size="8" text-anchor="middle" fill="#64748b">üìÅ Flexible Schema</text>
                        </svg>
                    </div>

                    <div class="grid md:grid-cols-2 gap-6 mt-4">
                        <div>
                            <h4 class="font-semibold text-slate-600 mb-2">Relational Databases (SQL)</h4>
                            <p class="text-sm">Relational databases store data in a highly structured way, using tables composed of rows and columns. Think of an Excel spreadsheet where each column has a specific data type and every row must follow that structure.</p>
                            <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                                <li><strong>Schema:</strong> The structure is defined by a fixed schema before you add any data. Changing this structure later can be complex.</li>
                                <li><strong>Relationships:</strong> Data in different tables is linked together using keys. This minimizes data duplication.</li>
                                <li><strong>Consistency:</strong> Designed for reliability and consistency (ACID compliance), vital for transactions.</li>
                            </ul>
                        </div>
                        <div>
                            <h4 class="font-semibold text-slate-600 mb-2">Non-Relational Databases (NoSQL)</h4>
                            <p class="text-sm">Non-relational, or NoSQL ("Not Only SQL"), databases are built for flexibility and scale. They don't use the rigid table structure and can store unstructured or semi-structured data.</p>
                            <ul class="list-disc list-inside text-sm space-y-1 mt-2">
                                <li><strong>Schema:</strong> They have a dynamic schema, meaning you can add data without a predefined structure.</li>
                                <li><strong>Data Models:</strong> Several types exist, including Document, Key-Value, and Graph.</li>
                                <li><strong>Scalability:</strong> Designed to scale out horizontally (adding more servers), ideal for big data.</li>
                            </ul>
                        </div>
                    </div>
                </div>

                <div class="concept-card bg-white p-6 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-xl font-bold font-heading text-slate-700 mb-3">Key Differences at a Glance</h3>
                    <div class="overflow-x-auto">
                        <table class="w-full text-sm text-left">
                            <thead class="bg-slate-100">
                                <tr>
                                    <th class="p-3 font-semibold">Feature</th>
                                    <th class="p-3 font-semibold">Relational Database (SQL)</th>
                                    <th class="p-3 font-semibold">Non-Relational Database (NoSQL)</th>
                                </tr>
                            </thead>
                            <tbody>
                                <tr class="border-b">
                                    <td class="p-3 font-medium">Data Model</td>
                                    <td class="p-3">Tables with rows and columns</td>
                                    <td class="p-3">Documents, key-value pairs, graphs, etc.</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-3 font-medium">Schema</td>
                                    <td class="p-3">Rigid and predefined</td>
                                    <td class="p-3">Flexible and dynamic</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-3 font-medium">Scalability</td>
                                    <td class="p-3">Vertically (increase power of one server)</td>
                                    <td class="p-3">Horizontally (add more servers)</td>
                                </tr>
                                <tr class="border-b">
                                    <td class="p-3 font-medium">Language</td>
                                    <td class="p-3">SQL</td>
                                    <td class="p-3">Varies by database</td>
                                </tr>
                                <tr>
                                    <td class="p-3 font-medium">Best For</td>
                                    <td class="p-3">Transactions, complex queries, data integrity</td>
                                    <td class="p-3">Big data, unstructured data, high scalability</td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                </div>
            </div>
        </section>

        <section id="setup" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 2: Setting Up Your Practice Environment</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">To learn SQL, you need a database. We recommend **SQLite** because it's serverless, zero-configuration, and creates a simple file for your database, letting you focus on learning SQL without complex setup.</p>
            </div>
            <div class="max-w-4xl mx-auto bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                <details class="mb-4 bg-slate-50 p-4 rounded-lg">
                    <summary class="text-lg font-heading text-slate-700">Installation Instructions</summary>
                    <div class="mt-4 pl-4 border-l-2 border-orange-300 text-slate-600 space-y-2 text-sm">
                        <p><strong>Windows:</strong> Download precompiled binaries from the SQLite website, extract them to `C:\sqlite`, and add this folder to your system's PATH.</p>
                        <p><strong>macOS:</strong> Open Terminal and run `brew install sqlite` (requires Homebrew).</p>
                        <p><strong>Linux (Debian/Ubuntu):</strong> Open a terminal and run `sudo apt-get install sqlite3`.</p>
                        <p><strong>Verify:</strong> Open a new terminal and type `sqlite3 --version`. You should see the version number.</p>
                    </div>
                </details>
                <details class="bg-slate-50 p-4 rounded-lg">
                    <summary class="text-lg font-heading text-slate-700">Loading the Sample HR Database</summary>
                    <div class="mt-4 pl-4 border-l-2 border-orange-300 text-slate-600 space-y-2 text-sm">
                        <p>We will use a sample Human Resources (HR) database. Imagine you have downloaded the setup script `hr_database.sql`.</p>
                        <p>1. Open your terminal.</p>
                        <p>2. Navigate to where you saved the `.sql` file.</p>
                        <p>3. Run this command to create and populate the database:</p>
                        <div class="bg-slate-800 text-white font-mono text-sm p-3 rounded-md">sqlite3 hr.db ".read hr_database.sql"</div>
                        <p>4. You can now access your database with `sqlite3 hr.db`.</p>
                    </div>
                </details>
            </div>
        </section>

        <section id="commands" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 3: Core Command Simulator</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">Explore the building blocks of SQL with this interactive simulator. Select a command, review the example, run it, and even get an AI-powered explanation of the code.</p>
            </div>
            <div class="w-full max-w-6xl mx-auto bg-white rounded-xl shadow-lg border border-slate-200">
                <div class="p-3 border-b border-slate-200 flex flex-wrap justify-center gap-2 bg-slate-50/50 rounded-t-xl">
                    <button class="category-btn px-3 py-1.5 text-sm font-medium rounded-md" data-category="dql">DQL (Queries)</button>
                    <button class="category-btn px-3 py-1.5 text-sm font-medium rounded-md" data-category="dml">DML (Manipulation)</button>
                    <button class="category-btn px-3 py-1.5 text-sm font-medium rounded-md" data-category="ddl">DDL (Definition)</button>
                </div>
                <div id="command-buttons-container" class="p-3 border-b border-slate-200 flex flex-wrap justify-center gap-2"></div>
                <div id="command-simulator" class="p-6 md:p-8 grid grid-cols-1 lg:grid-cols-2 gap-6 items-start"></div>
            </div>
        </section>
        
        <section id="keywords" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">SQL Keywords Glossary</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">A comprehensive reference for all major SQL keywords and functions. Use the search bar to quickly filter the list.</p>
            </div>
            <div class="max-w-4xl mx-auto mb-6">
                <input type="search" id="keyword-search" placeholder="Search for a keyword (e.g., SELECT)..." class="w-full p-3 border border-slate-300 rounded-lg focus:ring-orange-500 focus:border-orange-500 transition bg-white">
            </div>
            <div id="keywords-container" class="space-y-3 max-w-4xl mx-auto">
                <!-- Keywords will be injected here by JS -->
            </div>
        </section>

        <section id="ai-assistant" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 4: ‚ú® AI Query Assistant</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">Bridge the gap between plain English and SQL. Type a request about the HR database, and our AI assistant will generate the SQL query for you.</p>
            </div>
            <div class="max-w-4xl mx-auto grid grid-cols-1 md:grid-cols-3 gap-6">
                <div class="md:col-span-2 bg-white p-8 rounded-xl shadow-lg border border-slate-200">
                    <div class="mb-4">
                        <label for="nl-input" class="block text-sm font-medium text-slate-700 mb-2">Enter your request:</label>
                        <textarea id="nl-input" rows="3" class="w-full p-3 border border-slate-300 rounded-lg focus:ring-orange-500 focus:border-orange-500 transition bg-white" placeholder="e.g., Show me the first and last names of all employees in the Sales department, ordered by salary from highest to lowest"></textarea>
                    </div>
                    <button id="generate-sql-btn" class="w-full bg-orange-500 text-white font-bold py-2.5 px-4 rounded-lg hover:bg-orange-600 transition-colors flex items-center justify-center shadow-md disabled:opacity-70 disabled:cursor-wait">
                        <span class="material-symbols-outlined !text-base mr-1">auto_awesome</span>
                        <span class="btn-text">Generate SQL</span>
                        <div class="spinner hidden ml-2"></div>
                    </button>
                    <div id="ai-output-container" class="mt-6">
                        <!-- AI output will be rendered here -->
                    </div>
                </div>
                <div class="bg-slate-50 p-6 rounded-xl border border-slate-200">
                    <h4 class="text-lg font-bold font-heading text-slate-700 mb-3 flex items-center">
                        <span class="material-symbols-outlined !text-lg mr-1 text-blue-500">schema</span>
                        DB Schema
                    </h4>
                    <div class="space-y-3 text-sm">
                        <div>
                            <p class="font-semibold text-slate-600">employees</p>
                            <ul class="list-disc list-inside pl-2 font-mono text-xs">
                                <li>employee_id (PK)</li>
                                <li>first_name</li>
                                <li>last_name</li>
                                <li>salary</li>
                                <li>department_id (FK)</li>
                            </ul>
                        </div>
                        <div>
                            <p class="font-semibold text-slate-600">departments</p>
                            <ul class="list-disc list-inside pl-2 font-mono text-xs">
                                <li>department_id (PK)</li>
                                <li>department_name</li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
        </section>

        <section id="joins" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 5: The Art of the JOIN</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">The true power of relational databases lies in combining data from multiple tables. Select a JOIN type below to see an advanced animation of how the join is processed, step-by-step.</p>
            </div>
            <div class="bg-white p-6 rounded-xl shadow-lg border border-slate-200">
                <div class="flex justify-center flex-wrap gap-2 mb-6">
                    <button class="command-btn px-3 py-2 text-sm rounded-md" data-join="inner">INNER JOIN</button>
                    <button class="command-btn px-3 py-2 text-sm rounded-md" data-join="left">LEFT JOIN</button>
                    <button class="command-btn px-3 py-2 text-sm rounded-md" data-join="right">RIGHT JOIN</button>
                    <button id="reset-join-animation" class="bg-slate-200 px-3 py-2 text-sm rounded-md hover:bg-slate-300 transition-colors">Reset</button>
                </div>
                <div id="join-animation-container" class="join-animation-container">
                    <!-- Animation will be built here by JS -->
                </div>
                <div id="join-display" class="mt-6 bg-slate-800 text-white rounded-lg p-6"></div>
            </div>
        </section>

        <section id="advanced" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 6: Advanced Concepts</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">Go beyond the basics with these powerful SQL features. This section introduces concepts for writing more sophisticated, efficient, and readable queries.</p>
            </div>
            <div class="space-y-6">
                 <div class="concept-card bg-white p-5 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold font-heading text-slate-700 mb-2">Views</h3>
                    <p class="text-sm">A view is a virtual table based on the result-set of a stored SQL statement. It can simplify complex queries, provide a layer of security by restricting access to underlying tables, and present data in a more intuitive way.
                    <br><strong>Use Case:</strong> Creating a `V_SALES_REPORT` view that joins `employees`, `orders`, and `products` to simplify daily reporting queries.</p>
                </div>
                 <div class="concept-card bg-white p-5 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold font-heading text-slate-700 mb-2">Indexes</h3>
                    <p class="text-sm">An index is a special lookup table that the database search engine can use to speed up data retrieval. An index is a pointer to data in a table.
                    <br><strong>Types:</strong> Clustered (determines the physical order of data) and Non-Clustered (has a separate structure from the data rows).
                    <br><strong>Use Case:</strong> Adding an index to the `last_name` column in the `employees` table to significantly speed up searches for employees by their last name.</p>
                </div>
                <div class="concept-card bg-white p-5 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold font-heading text-slate-700 mb-2">Common Table Expressions (CTEs)</h3>
                    <p class="text-sm">A CTE, defined with the `WITH` clause, creates a temporary, named result set that you can reference. They dramatically improve the readability and modularity of complex queries.
                    <br><strong>Use Case:</strong> Breaking a multi-step analysis into logical, readable parts instead of using deeply nested subqueries.</p>
                </div>
                <div class="concept-card bg-white p-5 rounded-lg shadow-sm border border-slate-200">
                    <h3 class="text-lg font-bold font-heading text-slate-700 mb-2">Window Functions</h3>
                    <p class="text-sm">Window functions perform a calculation across a set of table rows related to the current row. Unlike aggregate functions (`SUM`, `AVG`), they do not collapse rows; they return a value for each row.
                    <br><strong>Keywords:</strong> `OVER()`, `PARTITION BY`, `ROW_NUMBER()`.
                    <br><strong>Use Case:</strong> Calculating a running total, or ranking employees within each department based on salary.</p>
                </div>
            </div>
        </section>

        <section id="prep" class="tab-panel hidden">
            <div class="text-center mb-10">
                <h2 class="text-2xl md:text-3xl font-bold font-heading text-slate-800">Module 7: Interview Prep</h2>
                <p class="max-w-3xl mx-auto text-slate-500 mt-3 text-sm md:text-base">Test your knowledge with these common interview questions. Click on a card to reveal the answer.</p>
            </div>
            <div id="quiz-container" class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6">
                <!-- Quiz cards will be injected here -->
            </div>
        </section>

        <div id="smart-switch-container" class="mt-12 flex justify-between items-center">
            <button id="prev-module-btn" class="bg-white text-slate-600 font-medium py-2 px-4 rounded-lg hover:bg-slate-200 transition-colors flex items-center shadow-sm border border-slate-200 disabled:opacity-50 disabled:cursor-not-allowed">
                <span class="material-symbols-outlined !text-lg mr-1">arrow_back</span> Previous
            </button>
            <button id="next-module-btn" class="bg-indigo-600 text-white font-medium py-2 px-4 rounded-lg hover:bg-indigo-700 transition-colors flex items-center shadow-md disabled:opacity-50 disabled:cursor-not-allowed">
                Next <span class="material-symbols-outlined !text-lg ml-1">arrow_forward</span>
            </button>
        </div>

    </main>

    <footer class="bg-slate-800 text-white mt-16 md:mt-24">
        <div class="container mx-auto px-6 py-8 text-center text-slate-400"><p>&copy; 2025 SQL Mastery Guide. An interactive learning experience.</p></div>
    </footer>

    <script>
    document.addEventListener('DOMContentLoaded', function () {
        const navLinks = document.querySelectorAll('.nav-link');
        const tabPanels = document.querySelectorAll('.tab-panel');
        const tabOrder = Array.from(navLinks).map(link => link.dataset.tab);
        let currentTabIndex = 0;

        const prevModuleBtn = document.getElementById('prev-module-btn');
        const nextModuleBtn = document.getElementById('next-module-btn');
        
        // --- Mobile Menu Toggle ---
        const menuToggle = document.getElementById('menu-toggle');
        const mainNav = document.getElementById('main-nav');
        
        menuToggle.addEventListener('click', () => {
            mainNav.classList.toggle('hidden');
        });

        function updateSmartSwitchButtons() {
            prevModuleBtn.disabled = currentTabIndex === 0;
            nextModuleBtn.disabled = currentTabIndex === tabOrder.length - 1;
        }

        function switchTab(tabId, fromHistory = false) {
            if (!tabOrder.includes(tabId)) tabId = 'foundations'; // Fallback to default
            currentTabIndex = tabOrder.indexOf(tabId);
            
            tabPanels.forEach(panel => panel.classList.add('hidden'));
            navLinks.forEach(link => link.classList.remove('active'));

            const activePanel = document.getElementById(tabId);
            const activeLink = document.querySelector(`.nav-link[data-tab="${tabId}"]`);
            
            if(activePanel) {
                activePanel.classList.remove('hidden');
                activePanel.classList.add('fade-in');
            }
            if(activeLink) {
                activeLink.classList.add('active');
            }
            
            updateSmartSwitchButtons();
            if (!fromHistory) {
                localStorage.setItem('lastTab', tabId);
            }
            window.scrollTo(0, 0);

            // Close mobile menu on tab switch
            if (window.innerWidth < 768) { // md breakpoint
                mainNav.classList.add('hidden');
            }
        }
        
        prevModuleBtn.addEventListener('click', () => {
            if (currentTabIndex > 0) {
                switchTab(tabOrder[currentTabIndex - 1]);
            }
        });

        nextModuleBtn.addEventListener('click', () => {
            if (currentTabIndex < tabOrder.length - 1) {
                switchTab(tabOrder[currentTabIndex + 1]);
            }
        });

        navLinks.forEach(link => {
            link.addEventListener('click', (e) => {
                e.preventDefault();
                const tabId = e.target.closest('.nav-link').getAttribute('data-tab');
                switchTab(tabId);
            });
        });

        const lastTab = localStorage.getItem('lastTab') || 'foundations';
        switchTab(lastTab, true);

        const commandContent = {
            dql: {
                select: { 
                    title: 'SELECT...WHERE', description: 'Retrieves data from a table, filtered by a specific condition.', 
                    code: `SELECT first_name, last_name, salary\nFROM employees\nWHERE department_id = 6;`, 
                    tip: 'Use `WHERE` to narrow down results and improve query performance.',
                    output: { headers: ['first_name', 'last_name', 'salary'], rows: [['Alexander', 'Hunold', 9000.00], ['Bruce', 'Ernst', 6000.00], ['David', 'Austin', 4800.00]] }
                },
                orderby: {
                    title: 'ORDER BY', description: 'Sorts the result set in ascending (ASC) or descending (DESC) order.',
                    code: `SELECT first_name, last_name, salary\nFROM employees\nORDER BY salary DESC;`,
                    tip: 'You can sort by multiple columns: `ORDER BY col1 ASC, col2 DESC`.',
                    output: { headers: ['first_name', 'last_name', 'salary'], rows: [['Steven', 'King', 24000.00], ['Neena', 'Kochhar', 17000.00], ['Lex', 'De Haan', 17000.00]] }
                },
                groupby: {
                    title: 'GROUP BY...HAVING', description: 'Groups rows that have the same values into summary rows. `HAVING` filters these groups.',
                    code: `SELECT department_id, COUNT(employee_id) as num_employees\nFROM employees\nGROUP BY department_id\nHAVING COUNT(employee_id) > 5;`,
                    tip: '`WHERE` filters rows before grouping; `HAVING` filters groups after grouping.',
                    output: { headers: ['department_id', 'num_employees'], rows: [[5, 45], [8, 34], [3, 6]] }
                }
            },
            dml: {
                insert: { 
                    title: 'INSERT INTO', description: 'Adds new rows of data to a table.', 
                    code: `INSERT INTO employees (employee_id, first_name, last_name, email, hire_date, job_id, salary)\nVALUES (207, 'John', 'Smith', 'JSMITH', '2024-01-01', 9, 8000);`, 
                    tip: 'Always specify column names to make your code more resilient to table changes.',
                    output: { message: '1 row(s) affected.' }
                },
                update: { 
                    title: 'UPDATE', description: 'Modifies existing records in a table. The `WHERE` clause is critical.', 
                    code: `UPDATE employees\nSET salary = 8500.00\nWHERE employee_id = 207;`, 
                    tip: 'CRITICAL: Always use a `WHERE` clause, or you will update every row in the table.',
                    output: { message: '1 row(s) updated.' }
                },
                delete: { 
                    title: 'DELETE', description: 'Removes existing records from a table. The `WHERE` clause is critical.', 
                    code: `DELETE FROM employees\nWHERE employee_id = 207;`, 
                    tip: 'CRITICAL: Always use a `WHERE` clause, or you will delete every row.',
                    output: { message: '1 row(s) deleted.' }
                }
            },
            ddl: {
                create: { 
                    title: 'CREATE TABLE', description: 'Creates a new table in the database, defining its columns and data types.', 
                    code: `CREATE TABLE projects (\n    project_id INTEGER PRIMARY KEY,\n    project_name VARCHAR(100) NOT NULL,\n    budget DECIMAL(12, 2)\n);`, 
                    tip: 'Choose the most appropriate data types for your columns to ensure data integrity.',
                    output: { message: 'Table "projects" created successfully.' }
                },
                alter: { 
                    title: 'ALTER TABLE', description: 'Modifies an existing table structure (add, drop, or modify columns).', 
                    code: `ALTER TABLE projects\nADD COLUMN project_manager_id INTEGER;`, 
                    tip: 'Be cautious when altering tables with existing data, as it can be a slow or destructive operation.',
                    output: { message: 'Table "projects" altered.' }
                },
                drop: { 
                    title: 'DROP TABLE', description: 'Permanently deletes a table and all its data. This action is irreversible.', 
                    code: `DROP TABLE old_projects;`, 
                    tip: 'Use with extreme caution. `TRUNCATE` removes all rows but keeps the table structure.',
                    output: { message: 'Table "old_projects" dropped.' }
                }
            }
        };

        const categoryBtns = document.querySelectorAll('.category-btn');
        const commandBtnsContainer = document.getElementById('command-buttons-container');
        const simulatorContainer = document.getElementById('command-simulator');

        function renderCommandButtons(category) {
            commandBtnsContainer.innerHTML = '';
            Object.keys(commandContent[category]).forEach(command => {
                const content = commandContent[category][command];
                const button = document.createElement('button');
                button.className = 'command-btn px-3 py-1.5 text-sm font-medium rounded-md bg-slate-100 text-slate-700 transition-colors hover:bg-slate-200';
                button.dataset.command = command;
                button.textContent = content.title;
                button.addEventListener('click', () => showSimulator(category, command));
                commandBtnsContainer.appendChild(button);
            });
        }

        function showSimulator(category, command) {
            const content = commandContent[category][command];
            simulatorContainer.innerHTML = `
                <div>
                    <h3 class="text-xl font-bold font-heading text-slate-800 mb-2">${content.title}</h3>
                    <p class="text-slate-600 mb-4 text-sm">${content.description}</p>
                    <div class="bg-slate-800 text-white rounded-lg p-4 mb-4 relative">
                        <pre><code id="current-query" class="font-mono text-sm">${content.code}</code></pre>
                        <button class="copy-btn absolute top-2 right-2 bg-slate-600 hover:bg-slate-500 text-white text-xs px-2 py-1 rounded">Copy</button>
                    </div>
                    <div class="bg-orange-100 border-l-4 border-orange-400 text-orange-800 p-4 rounded-r-lg text-sm">
                        <p><strong>Tip:</strong> ${content.tip}</p>
                    </div>
                </div>
                <div>
                    <div class="flex space-x-2 mb-4">
                        <button id="run-query-btn" class="flex-1 bg-blue-600 text-white font-bold py-2 px-4 rounded-md hover:bg-blue-700 transition-colors shadow">Run Query &#9654;</button>
                        <button id="explain-query-btn" class="flex-1 bg-slate-600 text-white font-bold py-2 px-4 rounded-md hover:bg-slate-700 transition-colors shadow flex items-center justify-center disabled:opacity-70 disabled:cursor-wait">
                           <span class="btn-text">‚ú® Explain Query</span>
                           <div class="spinner hidden ml-2"></div>
                        </button>
                    </div>
                    <div id="output-container" class="bg-white p-4 rounded-lg border border-slate-200 min-h-[200px] overflow-x-auto">
                        <p class="text-slate-400 text-sm">Click "Run Query" to see simulated output or "Explain Query" for an AI explanation.</p>
                    </div>
                </div>
            `;

            document.getElementById('run-query-btn').addEventListener('click', () => {
                const outputContainer = document.getElementById('output-container');
                outputContainer.innerHTML = `<div class="flex items-center justify-center h-full"><div class="spinner"></div><p class="ml-3 text-slate-500">Executing...</p></div>`;
                
                setTimeout(() => {
                    outputContainer.innerHTML = ''; 
                    if (content.output.message) {
                        outputContainer.innerHTML = `<p class="font-mono text-green-600 text-sm fade-in">${content.output.message}</p>`;
                    } else if (content.output.rows) {
                        let tableHTML = '<table class="output-table fade-in"><thead><tr>';
                        content.output.headers.forEach(h => tableHTML += `<th>${h}</th>`);
                        tableHTML += '</tr></thead><tbody>';
                        content.output.rows.forEach(row => {
                            tableHTML += '<tr>';
                            row.forEach(cell => tableHTML += `<td>${cell}</td>`);
                            tableHTML += '</tr>';
                        });
                        tableHTML += '</tbody></table>';
                        outputContainer.innerHTML = tableHTML;
                    }
                }, 500);
            });

            document.getElementById('explain-query-btn').addEventListener('click', handleExplainQuery);
            simulatorContainer.querySelector('.copy-btn').addEventListener('click', handleCopyClick);

            commandBtnsContainer.querySelectorAll('.command-btn').forEach(btn => {
                btn.classList.toggle('active', btn.dataset.command === command);
            });
        }

        function showCategory(category) {
            categoryBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.category === category));
            renderCommandButtons(category);
            const firstCommand = Object.keys(commandContent[category])[0];
            showSimulator(category, firstCommand);
        }

        categoryBtns.forEach(btn => btn.addEventListener('click', () => showCategory(btn.dataset.category)));
        showCategory('dql');

        const joinContent = {
            inner: { title: 'INNER JOIN', description: 'Returns records that have matching values in both tables.', code: `SELECT e.name, d.dept_name\nFROM Employees e\nINNER JOIN Departments d ON e.dept_id = d.id;` },
            left: { title: 'LEFT JOIN', description: 'Returns all records from the left table (Employees), and the matched records from the right table.', code: `SELECT e.name, d.dept_name\nFROM Employees e\nLEFT JOIN Departments d ON e.dept_id = d.id;` },
            right: { title: 'RIGHT JOIN', description: 'Returns all records from the right table (Departments), and the matched records from the left table.', code: `SELECT e.name, d.dept_name\nFROM Employees e\nRIGHT JOIN Departments d ON e.dept_id = d.id;` }
        };
        const joinAnimationContainer = document.getElementById('join-animation-container');
        const joinDisplay = document.getElementById('join-display');
        const joinBtns = document.querySelectorAll('#joins .command-btn');
        
        const employeesData = [ { id: 1, name: 'Alice', dept_id: 101 }, { id: 2, name: 'Bob', dept_id: 102 }, { id: 3, name: 'Charlie', dept_id: 101 }, { id: 4, name: 'David', dept_id: null } ];
        const departmentsData = [ { id: 101, dept_name: 'Sales' }, { id: 102, dept_name: 'IT' }, { id: 103, dept_name: 'HR' } ];

        function createTableViz(title, data, headers) {
            let rowsHtml = data.map(row => `<div class="join-row" data-row-id="${row.id}" data-key="${row.dept_id !== undefined ? row.dept_id : row.id}">${headers.map(h => `<span>${row[h] || 'NULL'}</span>`).join('')}</div>`).join('');
            return `<div class="join-table-viz"><div class="header">${title}</div><div id="${title.toLowerCase()}-rows">${rowsHtml}</div></div>`;
        }

        function runJoinAnimation(joinType) {
            joinAnimationContainer.innerHTML = `
                ${createTableViz('Employees', employeesData, ['name', 'dept_id'])}
                <div id="join-process-area" class="join-process-area">
                    <div class="text-sm" id="join-status-text">Starting...</div>
                    <svg class="w-16 h-16" viewBox="0 0 100 100"><path id="arrow-path" d="M 20 50 H 80" stroke="#94a3b8" stroke-width="2" fill="none" marker-end="url(#join-arrow)"/></svg>
                </div>
                ${createTableViz('Departments', departmentsData, ['id', 'dept_name'])}
                <defs><marker id="join-arrow" viewBox="0 0 10 10" refX="5" refY="5" markerWidth="6" markerHeight="6" orient="auto-start-reverse"><path d="M 0 0 L 10 5 L 0 10 z" fill="#94a3b8"/></marker></defs>
            `;
            
            const resultContainer = document.createElement('div');
            resultContainer.className = 'join-table-viz col-span-3 mt-4';
            resultContainer.innerHTML = `<div class="header">Result</div><div id="result-rows"></div>`;
            if (joinAnimationContainer.parentElement.querySelector('.col-span-3')) {
                joinAnimationContainer.parentElement.querySelector('.col-span-3').remove();
            }
            joinAnimationContainer.parentElement.appendChild(resultContainer);

            const resultRowsContainer = document.getElementById('result-rows');
            const statusText = document.getElementById('join-status-text');
            let delay = 500;

            const highlightRow = (table, rowId, className) => {
                const row = document.querySelector(`#${table}-rows [data-row-id="${rowId}"]`);
                if (row) {
                    row.classList.add(className);
                    setTimeout(() => row.classList.remove(className), 1500);
                }
            };

            const processRow = (e) => {
                return new Promise(resolve => {
                    setTimeout(() => {
                        statusText.textContent = `Checking ${e.name}...`;
                        const d = departmentsData.find(d => d.id === e.dept_id);
                        
                        let resultRow = null;
                        if (joinType === 'inner') {
                            if (d) {
                                highlightRow('employees', e.id, 'highlight-match');
                                highlightRow('departments', d.id, 'highlight-match');
                                statusText.textContent = `Match found for ${e.name}!`;
                                resultRow = { name: e.name, dept_name: d.dept_name };
                            } else {
                                highlightRow('employees', e.id, 'highlight-no-match');
                                statusText.textContent = `${e.name} has no match.`;
                            }
                        } else if (joinType === 'left') {
                            if (d) {
                                highlightRow('employees', e.id, 'highlight-match');
                                highlightRow('departments', d.id, 'highlight-match');
                                statusText.textContent = `Match found for ${e.name}!`;
                                resultRow = { name: e.name, dept_name: d.dept_name };
                            } else {
                                highlightRow('employees', e.id, 'highlight-match');
                                statusText.textContent = `${e.name} included (no match).`;
                                resultRow = { name: e.name, dept_name: 'NULL' };
                            }
                        }
                        
                        if(resultRow) {
                            const newRowEl = document.createElement('div');
                            newRowEl.className = 'join-row result-row-enter bg-green-100';
                            newRowEl.innerHTML = `<span>${resultRow.name}</span><span>${resultRow.dept_name}</span>`;
                            resultRowsContainer.appendChild(newRowEl);
                        }
                        resolve();
                    }, delay);
                });
            };

            const processRightJoin = async () => {
                for (const d of departmentsData) {
                    await new Promise(resolve => {
                         setTimeout(async () => {
                            statusText.textContent = `Checking ${d.dept_name}...`;
                            const emps = employeesData.filter(e => e.dept_id === d.id);
                            if (emps.length > 0) {
                                for(const e of emps) {
                                    highlightRow('employees', e.id, 'highlight-match');
                                    highlightRow('departments', d.id, 'highlight-match');
                                    statusText.textContent = `Match found for ${d.dept_name}!`;
                                    const newRowEl = document.createElement('div');
                                    newRowEl.className = 'join-row result-row-enter bg-green-100';
                                    newRowEl.innerHTML = `<span>${e.name}</span><span>${d.dept_name}</span>`;
                                    resultRowsContainer.appendChild(newRowEl);
                                    await new Promise(r => setTimeout(r, 500));
                                }
                            } else {
                                highlightRow('departments', d.id, 'highlight-match');
                                statusText.textContent = `${d.dept_name} included (no match).`;
                                const newRowEl = document.createElement('div');
                                newRowEl.className = 'join-row result-row-enter bg-green-100';
                                newRowEl.innerHTML = `<span>NULL</span><span>${d.dept_name}</span>`;
                                resultRowsContainer.appendChild(newRowEl);
                            }
                            resolve();
                        }, delay);
                    });
                }
                statusText.textContent = 'Done!';
            };

            const runSequence = async () => {
                if (joinType === 'right') {
                    await processRightJoin();
                } else {
                    for (const e of employeesData) {
                        await processRow(e);
                    }
                    statusText.textContent = 'Done!';
                }
            };
            
            runSequence();
        }

        function showJoin(joinType) {
            if (!joinContent[joinType]) return;
            const content = joinContent[joinType];
            joinDisplay.innerHTML = `
                <h3 class="text-xl font-bold font-heading text-orange-400 mb-2">${content.title}</h3>
                <p class="text-slate-300 mb-4 text-sm">${content.description}</p>
                <div class="bg-slate-900 rounded p-3 relative">
                    <pre><code class="font-mono text-xs text-orange-300">${content.code}</code></pre>
                    <button class="copy-btn absolute top-2 right-2 bg-slate-600 hover:bg-slate-500 text-white text-xs px-2 py-1 rounded">Copy</button>
                </div>`;
            
            joinBtns.forEach(btn => btn.classList.toggle('active', btn.dataset.join === joinType));
            joinDisplay.querySelector('.copy-btn').addEventListener('click', handleCopyClick);
            runJoinAnimation(joinType);
        }
        
        document.getElementById('reset-join-animation').addEventListener('click', () => {
            const activeJoin = document.querySelector('#joins .command-btn.active')?.dataset.join || 'inner';
            showJoin(activeJoin);
        });

        joinBtns.forEach(btn => btn.addEventListener('click', () => showJoin(btn.dataset.join)));
        showJoin('inner');

        const apiKey = ""; // IMPORTANT: Add your Gemini API key here
        const apiUrl = `https://generativelanguage.googleapis.com/v1beta/models/gemini-2.5-flash-preview-05-20:generateContent?key=${apiKey}`;

        async function callGeminiAPI(prompt) {
            const payload = { contents: [{ parts: [{ text: prompt }] }] };
            try {
                const response = await fetch(apiUrl, {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(payload)
                });
                if (!response.ok) { throw new Error(`API call failed with status: ${response.status}`); }
                const result = await response.json();
                if (result.candidates && result.candidates[0].content.parts[0].text) {
                    return result.candidates[0].content.parts[0].text;
                } else { return "Sorry, I couldn't get a response. The result format was unexpected. Please check the console for details."; }
            } catch (error) {
                console.error("Gemini API call error:", error);
                return `An error occurred: ${error.message}. Make sure you have added a valid API key.`;
            }
        }
        
        function setButtonLoadingState(button, isLoading) {
            const btnText = button.querySelector('.btn-text');
            const spinner = button.querySelector('.spinner');
            button.disabled = isLoading;
            if (isLoading) {
                btnText.classList.add('hidden');
                spinner.classList.remove('hidden');
            } else {
                btnText.classList.remove('hidden');
                spinner.classList.add('hidden');
            }
        }

        async function handleExplainQuery(event) {
            const button = event.currentTarget;
            const query = document.getElementById('current-query').innerText;
            const outputContainer = document.getElementById('output-container');
            
            setButtonLoadingState(button, true);
            outputContainer.innerHTML = `<div class="flex items-center justify-center h-full"><div class="spinner"></div><p class="ml-3 text-slate-500">AI is thinking...</p></div>`;
            
            const prompt = `Explain the following SQL query in simple, step-by-step terms for a beginner. Format the output as simple HTML paragraphs:\n\n${query}`;
            const explanation = await callGeminiAPI(prompt);

            outputContainer.innerHTML = `<div class="text-sm text-slate-700 p-2 bg-sky-50 rounded-md fade-in">${explanation}</div>`;
            setButtonLoadingState(button, false);
        }

        const generateSqlBtn = document.getElementById('generate-sql-btn');
        const nlInput = document.getElementById('nl-input');
        const aiOutputContainer = document.getElementById('ai-output-container');

        generateSqlBtn.addEventListener('click', async () => {
            const userInput = nlInput.value;
            if (!userInput.trim()) {
                aiOutputContainer.innerHTML = `<p class="text-red-500 text-sm">Please enter a request.</p>`;
                return;
            }
            
            setButtonLoadingState(generateSqlBtn, true);
            aiOutputContainer.innerHTML = `<div class="flex items-center"><div class="spinner"></div><p class="ml-3 text-slate-500">Generating SQL...</p></div>`;
            
            const schemaInfo = "HR database schema: employees(employee_id, first_name, last_name, salary, department_id), departments(department_id, department_name)";
            const prompt = `Based on this schema: ${schemaInfo}. Translate the following request into a valid SQL query. Only return the SQL code inside a markdown block. Request: "${userInput}"`;
            
            let generatedSql = await callGeminiAPI(prompt);
            generatedSql = generatedSql.replace(/```sql\n|```/g, '').trim();

            aiOutputContainer.innerHTML = `
                <h4 class="text-md font-semibold text-slate-800 mb-2">Generated SQL:</h4>
                <div class="bg-slate-800 text-white rounded-lg p-4 mb-4 relative">
                    <pre><code class="font-mono text-sm">${generatedSql}</code></pre>
                    <button class="copy-btn absolute top-2 right-2 bg-slate-600 hover:bg-slate-500 text-white text-xs px-2 py-1 rounded">Copy</button>
                </div>
            `;
            aiOutputContainer.querySelector('.copy-btn').addEventListener('click', handleCopyClick);
            setButtonLoadingState(generateSqlBtn, false);
        });
        
        function handleCopyClick(event) {
            const button = event.currentTarget;
            const codeElement = button.previousElementSibling.querySelector('code');
            if (codeElement) {
                navigator.clipboard.writeText(codeElement.innerText).then(() => {
                    const originalText = button.textContent;
                    button.textContent = 'Copied!';
                    setTimeout(() => {
                        button.textContent = originalText;
                    }, 2000);
                }).catch(err => {
                    console.error('Failed to copy text: ', err);
                });
            }
        }
        
        const quizData = [
            { q: "What is the difference between DELETE and TRUNCATE?", a: "DELETE is a DML command that removes rows one by one and can be rolled back. TRUNCATE is a DDL command that deallocates all space for a table without logging individual deletions and cannot be rolled back." },
            { q: "What are the ACID properties?", a: "Atomicity (all or nothing), Consistency (database remains in a valid state), Isolation (concurrent transactions don't affect each other), Durability (committed transactions are permanent)." },
            { q: "What is the difference between a Primary Key and a Unique Key?", a: "Both enforce uniqueness. A table can have only one Primary Key, which cannot contain NULL values. A table can have multiple Unique Keys, which can accept one NULL value." },
            { q: "What is the difference between UNION and UNION ALL?", a: "UNION combines result sets and removes duplicate rows. UNION ALL combines result sets but includes all rows, including duplicates. UNION ALL is faster." },
            { q: "What is an Index and why is it useful?", a: "An index is a data structure that improves the speed of data retrieval operations on a database table at the cost of additional writes and storage space. It's like an index in the back of a book." },
            { q: "What is Normalization?", a: "It is the process of organizing columns and tables in a relational database to minimize data redundancy. The main forms are 1NF, 2NF, and 3NF." },
            { q: "What is the difference between clustered and non-clustered indexes?", a: "A clustered index determines the physical order of data in a table. A table can have only one clustered index. A non-clustered index has a separate structure from the data rows, which points back to the data. A table can have many non-clustered indexes." },
            { q: "What are the different types of JOINs?", a: "INNER JOIN (returns matching rows), LEFT JOIN (returns all rows from the left table), RIGHT JOIN (returns all rows from the right table), and FULL OUTER JOIN (returns all rows when there is a match in one of the tables)." },
            { q: "What is the difference between WHERE and HAVING?", a: "The WHERE clause filters rows before they are grouped by the GROUP BY clause. The HAVING clause filters groups after the GROUP BY clause has been applied. You use HAVING with aggregate functions." },
            { q: "What is a View in SQL?", a: "A View is a virtual table based on the result-set of a stored SQL query. It simplifies complex queries and can be used to restrict access to data." },
        ];

        const quizContainer = document.getElementById('quiz-container');
        quizData.forEach(item => {
            const card = document.createElement('div');
            card.className = 'concept-card bg-white rounded-lg shadow-sm border border-slate-200 cursor-pointer p-4';
            card.innerHTML = `<div class="question font-semibold text-slate-700">${item.q}</div><div class="answer text-slate-600 mt-2 hidden text-sm">${item.a}</div>`;
            card.addEventListener('click', () => {
                card.querySelector('.answer').classList.toggle('hidden');
            });
            quizContainer.appendChild(card);
        });

        const keywordsData = {
            "Data Definition Language (DDL)": [
                { keyword: 'CREATE', syntax: 'CREATE TABLE table_name (...);', description: 'Used to create new database objects like tables, views, or indexes.' },
                { keyword: 'ALTER', syntax: 'ALTER TABLE table_name ADD column_name datatype;', description: 'Modifies the structure of an existing database object.' },
                { keyword: 'DROP', syntax: 'DROP TABLE table_name;', description: 'Permanently deletes a database object.' },
                { keyword: 'TRUNCATE', syntax: 'TRUNCATE TABLE table_name;', description: 'Quickly deletes all rows from a table, but not the table itself. This operation cannot be rolled back.' },
            ],
            "Data Manipulation Language (DML)": [
                { keyword: 'INSERT', syntax: 'INSERT INTO table_name (col1, col2) VALUES (val1, val2);', description: 'Adds new rows of data to a table.' },
                { keyword: 'UPDATE', syntax: 'UPDATE table_name SET col1 = val1 WHERE condition;', description: 'Modifies existing records in a table.' },
                { keyword: 'DELETE', syntax: 'DELETE FROM table_name WHERE condition;', description: 'Removes rows from a table.' }
            ],
            "Data Query Language (DQL)": [
                { keyword: 'SELECT', syntax: 'SELECT column1, column2 FROM table_name;', description: 'Retrieves data from one or more tables.' }
            ],
            "Clauses & Operators": [
                { keyword: 'WHERE', syntax: '... WHERE condition;', description: 'Filters records based on a specific condition.' },
                { keyword: 'ORDER BY', syntax: '... ORDER BY column ASC|DESC;', description: 'Sorts the result set in ascending or descending order.' },
                { keyword: 'GROUP BY', syntax: '... GROUP BY column_name;', description: 'Groups rows that have the same values into summary rows.' },
                { keyword: 'HAVING', syntax: '... HAVING condition;', description: 'Filters groups based on a condition, used after GROUP BY.' },
                { keyword: 'LIKE', syntax: "... WHERE column LIKE '%pattern%';", description: 'Performs pattern matching in string searches.' },
                { keyword: 'AS (Alias)', syntax: 'SELECT column AS alias_name ...;', description: 'Renames a column or table temporarily.' },
                { keyword: 'DISTINCT', syntax: 'SELECT DISTINCT column FROM table_name;', description: 'Returns only unique values.' },
            ],
            "Aggregate Functions": [
                { keyword: 'COUNT()', syntax: 'SELECT COUNT(column) FROM table_name;', description: 'Returns the number of rows.' },
                { keyword: 'SUM()', syntax: 'SELECT SUM(column) FROM table_name;', description: 'Returns the total sum of a numeric column.' },
                { keyword: 'AVG()', syntax: 'SELECT AVG(column) FROM table_name;', description: 'Returns the average value of a numeric column.' },
                { keyword: 'MIN()', syntax: 'SELECT MIN(column) FROM table_name;', description: 'Returns the smallest value in a column.' },
                { keyword: 'MAX()', syntax: 'SELECT MAX(column) FROM table_name;', description: 'Returns the largest value in a column.' }
            ]
        };

        const keywordsContainer = document.getElementById('keywords-container');
        const keywordSearchInput = document.getElementById('keyword-search');

        function renderKeywords(filter = '') {
            keywordsContainer.innerHTML = '';
            const filterText = filter.toLowerCase().trim();
            
            for (const category in keywordsData) {
                const filteredItems = keywordsData[category].filter(item => 
                    item.keyword.toLowerCase().includes(filterText) || 
                    item.description.toLowerCase().includes(filterText)
                );

                if (filteredItems.length > 0) {
                    const details = document.createElement('details');
                    details.className = 'bg-white rounded-lg shadow-sm border border-slate-200';
                    if (filterText) details.open = true;
                    
                    const summary = document.createElement('summary');
                    summary.className = 'text-lg font-heading text-slate-700 p-4 cursor-pointer';
                    summary.textContent = category;
                    details.appendChild(summary);

                    const contentDiv = document.createElement('div');
                    contentDiv.className = 'p-4 border-t border-slate-200 space-y-4';
                    
                    filteredItems.forEach(item => {
                        const keywordEl = document.createElement('div');
                        keywordEl.className = 'bg-slate-50 p-4 rounded-lg';
                        keywordEl.innerHTML = `
                            <h4 class="text-md font-bold font-heading text-slate-800">${item.keyword}</h4>
                            <p class="text-slate-600 text-sm mt-1 mb-3">${item.description}</p>
                            <div class="bg-slate-800 text-white rounded p-2 relative">
                                <pre><code class="font-mono text-xs">${item.syntax}</code></pre>
                                <button class="copy-btn absolute top-2 right-2 bg-slate-600 hover:bg-slate-500 text-white text-xs px-2 py-1 rounded">Copy</button>
                            </div>
                        `;
                        keywordEl.querySelector('.copy-btn').addEventListener('click', handleCopyClick);
                        contentDiv.appendChild(keywordEl);
                    });
                    
                    details.appendChild(contentDiv);
                    keywordsContainer.appendChild(details);
                }
            }
        }
        
        keywordSearchInput.addEventListener('input', (e) => renderKeywords(e.target.value));
        renderKeywords();

    });
    </script>
</body>
</html>
